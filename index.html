<!DOCTYPE html>
<html>
<!---
	Scopes:
	P0000.Area.TestScope {objects: [TestObject1, TestObject2, TestObject3, ...]}
	P0000.Area.TestObject.SubObject

-->
  <head>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <!--script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script-->
    <script type="text/javascript" src="raphael.min.js"></script>
    <script type="text/javascript" src="modelbased-lib.js"></script>
	<script type="text/javascript">
      	window.onload = function() {
          // Creates canvas 320 Ã— 200 at 10, 50
          var paper = Raphael(10, 50, 640, 480);

          // Creates circle at x = 50, y = 40, with radius 10
          var circle = paper.circle(50, 40, 10);
          // Sets the fill attribute of the circle to red (#f00)
          circle.attr("fill", "#f00");
          
          // Sets the stroke attribute of the circle to white
          circle.attr("stroke", "#fff");
          //$(circle).draggable();
          
          circle.attr({
            cursor: 'pointer',
          }).mouseover(function(e) {
            background.attr('fill', COLOR_HOVER);
          }).mouseout(function(e) {
            background.attr('fill', COLOR_NORMAL);
          }).mouseup(function(e) {
            alert("clicked");
          }); 
        }
      
      	function LoadScope(sId) {
          scope = localStorage.getItem(sId);
          if(scope) {
            // Load nodes
            DrawGrid();
          }
          else {
            // Error handling 
          }
        }
      
    	function DrawGrid() {
          // Create html
          for(j = 0; j < scope.size.y; j++) {
            for(i = 0; i < scope.size.x; i++) {
				//$("#grid").
            }
          }
        }
      
      	function PlaceNodes() {
          for(i = 0; i < scope.objects.length; i++) {
            o = scope.objects[i];
			// Fill the region on grid
			$("grid." + o.loc.x + "." + o.loc.y).css("color", "grey");
            // Add sub elements (queues) to the node?
          }
        }
      
      	function RunSimulation() { 
       	  // Nodes sorted by sequence
          // 
          maxItr = 999;
          que = new Array();
          for(i = 0; i < maxIter; i++) {
            que = RunEvents(que);
            if(que == null)
              break;
          }
        }
      
      function RunEvents(que) {
        // Iterate through all objects that have scripts
        // The scope timer is such a script (sets max iterations)
        
      }
      
    </script>
  </head>
  
  <body>
    <div id="grid">&nbsp;</div>
  </body>
</html>
